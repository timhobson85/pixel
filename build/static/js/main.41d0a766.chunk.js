(this.webpackJsonppixel=this.webpackJsonppixel||[]).push([[0],{100:function(e,t,a){e.exports=a(288)},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},272:function(e,t,a){},287:function(e,t,a){},288:function(e,t,a){"use strict";a.r(t);var o=a(0),r=a.n(o),n=a(97),i=a.n(n),c=(a(105),a(106),a(18)),s=a(19),l=a(21),u=a(20),m=a(22),p=(a(107),a(29)),h=a(98),d=(a(272),function(e){function t(){var e,a;Object(c.a)(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={displayColorPicker:!1,color:a.props.color,disableAlpha:!0},a.sendColorData=function(e){a.setState({color:e.hex}),a.props.sendColorData(a.state.color)},a.showColorPicker=function(){var e=a.state.displayColorPicker;a.setState({displayColorPicker:!e})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"colorPickerButton"},r.a.createElement("button",{id:"colorPickerButton",style:{backgroundColor:"".concat(this.props.color)},onClick:this.showColorPicker},this.state.displayColorPicker?"hide":"pick a color"),this.state.displayColorPicker?r.a.createElement(h.SketchPicker,{color:this.state.color,onChange:this.sendColorData,onChangeComplete:this.sendColorData,disableAlpha:this.state.disableAlpha,onMouseLeave:this.showColorPicker}):"")}}]),t}(r.a.Component)),f=a(60),b=a.n(f);b.a.initializeApp({apiKey:"AIzaSyBCSiijuJoNKrO4nN5pYo2oXvMHQI92ohg",authDomain:"pixel-54176.firebaseapp.com",databaseURL:"https://pixel-54176.firebaseio.com",projectId:"pixel-54176",storageBucket:"pixel-54176.appspot.com",messagingSenderId:"342090218102",appId:"1:342090218102:web:75891e1b2670bca2693d57",measurementId:"G-MF6VM6L27K"});var g=b.a,w=a(99),v=a.n(w),S=(a(287),function(e){function t(){var e,a;Object(c.a)(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={image:"",webcamShow:!1},a.setRef=function(e){a.webcam=e},a.capture=function(){var e=a.webcam.getScreenshot();a.setState({image:e},(function(){setTimeout((function(){return a.pixelate()}),0)})),a.setState({webcamShow:!1})},a.takeAnother=function(){a.setState({image:null})},a.componentDidMount=function(){},a.pixelate=function(){console.log("clearing database"),g.database().ref("/grid").remove();var e=a.refs.canvas,t=e.getContext("2d"),o=a.refs.webcamImage;console.log("canvas",e),console.log("ctx",t),console.log("img1",o);var r=o.width,n=o.height;e.width=r,e.height=n,t.drawImage(o,0,0);for(var i=t.getImageData(0,0,r,n).data,c=0;c<n;c+=1)for(var s=0;s<r;s+=1){var l=4*(s+c*r);t.fillStyle="rgba("+i[l]+","+i[l+1]+","+i[l+2]+","+i[l+3]+")",t.fillRect(s,c,1,1),a.firebaseSetPixel(s,c,t.fillStyle)}console.log("redraw grid here"),g.database().ref("/gridWasUpdated").set({update:g.database.ServerValue.TIMESTAMP})},a.firebaseSetPixel=function(e,t,a){console.log("sending to firebase"),g.database().ref("/grid/".concat(e,"-").concat(t)).set({row:e,col:t,color:a})},a.showWebCam=function(){a.setState({webcamShow:!0})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"webcamPage"},r.a.createElement("button",{id:"takePhotoButton",onClick:this.showWebCam},"take a photo"),r.a.createElement("div",null,this.state.webcamShow?r.a.createElement("div",null,r.a.createElement(v.a,{className:"showWebCam",audio:!1,height:400,ref:this.setRef,screenshotFormat:"image/jpeg",width:1e3,videoConstraints:{width:100,height:40,facingMode:"user"},minScreenshotHeight:40,minScreenshotWidth:100}),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.capture},"Capture photo"),r.a.createElement("br",null)):"",r.a.createElement("canvas",{ref:"canvas",width:100,height:40,className:"hidden"}),r.a.createElement("img",{ref:"webcamImage",src:this.state.image,className:"hidden"})))}}]),t}(r.a.Component)),k=function(e){function t(){var e,a;Object(c.a)(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={image:[],row:40,col:100,color:"#000000",mouseDown:!1,firstDraw:!0,eyeDropperActive:!1,webcamShow:!1},a.activateEyeDropper=function(){a.setState({eyeDropperActive:!0})},a.paintClick=function(e,t,o){if(a.state.eyeDropperActive)a.setState({color:o.target.style.backgroundColor,eyeDropperActive:!1});else{var r=Object(p.cloneDeep)(a.state.image);r[e].splice(t,1,a.state.color),a.setState({image:r}),a.firebaseSetLastDraw(e,t),a.firebaseSetPixel(e,t)}},a.paintMouseOver=function(e,t){if(a.state.mouseDown){a.firebaseSetLastDraw(e,t,a.state.color),a.firebaseSetPixel(e,t);var o=Object(p.cloneDeep)(a.state.image);o[e].splice(t,1,a.state.color),a.setState({image:o})}},a.setMouseDown=function(e,t){var o=Object(p.cloneDeep)(a.state.image);o[e].splice(t,1,a.state.color),a.firebaseSetLastDraw(e,t,a.state.color),a.firebaseSetPixel(e,t),a.setState({image:o}),a.setState({mouseDown:!0})},a.setMouseUp=function(){a.setState({mouseDown:!1})},a.firebaseSetLastDraw=function(e,t){g.database().ref("/lastDraw").set({row:e,col:t,color:a.state.color})},a.firebaseSetPixel=function(e,t){g.database().ref("/grid/".concat(t,"-").concat(e)).set({row:t,col:e,color:a.state.color})},a.firebaseLastDrawListen=function(){g.database().ref("/lastDraw").on("value",(function(e){var t=e.val();!1===a.state.firstDraw&&a.firebasePaint(t.row,t.col,t.color),a.setState({firstDraw:!1})}))},a.firebaseGridWasUpdatedListen=function(){g.database().ref("/gridWasUpdated").on("value",(function(e){e.val();a.getPhotoFromFirebase()}))},a.firebasePaint=function(e,t,o){var r=Object(p.cloneDeep)(a.state.image);r[e].splice(t,1,o),a.setState({image:r})},a.getPhotoFromFirebase=function(){g.database().ref("/grid").once("value").then((function(e){for(var t=Object.values(e.val()),o=Array(40).fill(null).map((function(e){return new Array(100)})),r=0;r<t.length;r++){var n=t[r],i=n.row,c=n.col,s=n.color;o[c][i]=s}a.setState({image:o})}))},a.firebaseEmptyGrid=function(){g.database().ref("/grid").remove()},a.colorPickerData=function(e){a.setState({color:e})},a.takeNewPhoto=function(){a.setState({webcamShow:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.firebaseLastDrawListen(),this.firebaseGridWasUpdatedListen(),this.getPhotoFromFirebase()}},{key:"render",value:function(){var e=this,t=this.state.image;return r.a.createElement("div",{className:"App"},r.a.createElement(S,null),this.state.image.length>1?r.a.createElement("div",{className:"pixelWrapper"},r.a.createElement("div",{className:"pixelGrid",onMouseLeave:this.setMouseUp},t.map((function(a,o){return r.a.createElement("div",{className:"row",style:{height:"".concat(100/t[o].length,"%")}},a.map((function(a,n){return r.a.createElement("div",{className:"pixel",style:{backgroundColor:t[o][n]||"rgb(70, 70, 70)",width:"".concat(100/t[o].length,"%"),paddingBottom:"".concat(100/t[o].length,"%")},onClick:function(t){return e.paintClick(o,n,t)},onMouseUp:e.setMouseUp})})))}))),r.a.createElement(d,{color:this.state.color,sendColorData:this.colorPickerData}),r.a.createElement("button",{onClick:this.activateEyeDropper,className:"eyedropperButton"},"eyedropper")):r.a.createElement("p",null,"loading..."),r.a.createElement("br",null),r.a.createElement("br",null))}}]),t}(r.a.Component);var D=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[100,1,2]]]);
//# sourceMappingURL=main.41d0a766.chunk.js.map