(this.webpackJsonppixel=this.webpackJsonppixel||[]).push([[0],{115:function(e,t,a){e.exports=a(308)},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){},287:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){},304:function(e,t,a){},305:function(e,t,a){},308:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(108),s=a.n(r),c=(a(120),a(6)),l=a(7),i=a(9),u=a(8),m=a(10),h=(a(121),a(30)),f=a(23),g=(a(122),a(109)),d=a(110),p=(a(287),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={displayColorPicker:!1,color:a.props.color,disableAlpha:!0},a.sendColorData=function(e){a.setState({color:e.hex}),a.props.sendColorData(a.state.color)},a.showColorPicker=function(){var e=a.state.displayColorPicker;a.setState({displayColorPicker:!e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"colorPickerButton"},o.a.createElement("button",{id:"colorPickerButton",style:{backgroundColor:"".concat(this.props.color)},onClick:this.showColorPicker},this.state.displayColorPicker?"hide":"pick a color"),this.state.displayColorPicker?o.a.createElement(d.SketchPicker,{color:this.state.color,onChange:this.sendColorData,onChangeComplete:this.sendColorData,disableAlpha:this.state.disableAlpha,onMouseLeave:this.showColorPicker}):"")}}]),t}(o.a.Component)),v=a(68),b=a.n(v);b.a.initializeApp({apiKey:"AIzaSyBCSiijuJoNKrO4nN5pYo2oXvMHQI92ohg",authDomain:"pixel-54176.firebaseapp.com",databaseURL:"https://pixel-54176.firebaseio.com",projectId:"pixel-54176",storageBucket:"pixel-54176.appspot.com",messagingSenderId:"342090218102",appId:"1:342090218102:web:75891e1b2670bca2693d57",measurementId:"G-MF6VM6L27K"});var w=b.a,C=a(111),E=a.n(C),S=(a(302),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={image:"",webcamShow:!1},a.setRef=function(e){a.webcam=e},a.capture=function(){var e=a.webcam.getScreenshot();a.setState({image:e},(function(){setTimeout((function(){return a.pixelate()}),0)})),a.setState({webcamShow:!1})},a.takeAnother=function(){a.setState({image:null})},a.componentDidUpdate=function(){},a.pixelate=function(){console.log("clearing database"),w.database().ref("/grid").remove();var e=a.refs.canvas,t=e.getContext("2d"),n=a.refs.webcamImage;console.log("canvas",e),console.log("ctx",t),console.log("img1",n);var o=n.width,r=n.height;e.width=o,e.height=r,t.drawImage(n,0,0);for(var s=t.getImageData(0,0,o,r).data,c=0;c<r;c+=1)for(var l=0;l<o;l+=1){var i=4*(l+c*o);t.fillStyle="rgba("+s[i]+","+s[i+1]+","+s[i+2]+","+s[i+3]+")",t.fillRect(l,c,1,1),a.firebaseSetPixel(l,c,t.fillStyle)}console.log("redraw grid here"),w.database().ref("/gridWasUpdated").set({update:Math.random()})},a.firebaseSetPixel=function(e,t,a){console.log("sending to firebase"),w.database().ref("/grid/".concat(e,"-").concat(t)).set({row:e,col:t,color:a})},a.showWebCam=function(){a.setState({webcamShow:!0})},a.cancelClick=function(){a.setState({webcamShow:!1})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"webcamPage"},o.a.createElement("button",{onClick:this.showWebCam},"take photo"),this.state.webcamShow&&o.a.createElement("div",{className:"webcamPopUp"},o.a.createElement("div",null,o.a.createElement(E.a,{className:"showWebCam",audio:!1,height:720,ref:this.setRef,screenshotFormat:"image/jpeg",width:1280,videoConstraints:{width:128,height:72,facingMode:"user"},minScreenshotHeight:72,minScreenshotWidth:128}),o.a.createElement("br",null),o.a.createElement("button",{onClick:this.capture},"Capture photo"),o.a.createElement("button",{onClick:this.cancelClick},"cancel"),o.a.createElement("br",null))),o.a.createElement("canvas",{ref:"canvas",width:128,height:72,className:"hidden"}),o.a.createElement("img",{ref:"webcamImage",src:this.state.image,className:"hidden"}))}}]),t}(o.a.Component)),y=a(49),k=(a(303),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={image:a.props.image,artist:"anonymous",title:"untitled",dataURL:"",saveImageShow:!1},a.handleChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a.saveImage=function(){console.log("saves");var e=a.refs.saveCanvas,t=e.getContext("2d"),n=a.refs.saveImageImage;n.width,n.height;e.width=1280,e.height=720;for(var o=a.props.image,r=0;r<o.length;r++)for(var s=0;s<o[r].length;s++)t.fillStyle=o[r][s],t.fillRect(10*s,10*r,10,10);var c=e.toDataURL("image/png");n.src=c,a.setState({dataURL:c})},a.downloadClick=function(){console.log("download");var e=a.refs.saveCanvas.toDataURL("image/png"),t=document.createElement("a");t.href=e,t.download="".concat(a.state.artist,"-").concat(a.state.title,".png"),t.click()},a.uploadClick=function(){var e=a.state,t=e.artist,n=e.title,o=e.dataURL;w.database().ref("/gallery/").push({artist:t,title:n,dataURL:o}),a.props.push("/gallery")},a.showSaveImage=function(){a.setState({showSaveImage:!0}),a.saveImage()},a.cancelClick=function(){a.setState({showSaveImage:!1}),a.props.getImageShow()},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.saveImage()}},{key:"render",value:function(){return o.a.createElement("div",{className:"saveImagePage"},o.a.createElement("canvas",{ref:"saveCanvas",width:1280,height:720,className:"saveImageCanvas"}),o.a.createElement("img",{ref:"saveImageImage",src:this.state.image,className:"saveImageImage hidden"}),o.a.createElement("div",{className:"saveImage"},o.a.createElement("label",null,"artist"),o.a.createElement("input",{name:"artist",onChange:this.handleChange,placeholder:this.state.artist,type:"text"}),o.a.createElement("br",null),o.a.createElement("label",null,"title"),o.a.createElement("input",{name:"title",onChange:this.handleChange,placeholder:this.state.title,type:"text"}),o.a.createElement("br",null),o.a.createElement("button",{onClick:this.uploadClick},"upload"),o.a.createElement("button",{onClick:this.downloadClick},"download")," ",o.a.createElement("br",null),o.a.createElement("button",{onClick:this.cancelClick},"cancel")))}}]),t}(o.a.Component)),D=a(114),O=(a(304),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={message:"",chatlog:[],firstMessage:!0},a.handleKeyDown=function(e){"Enter"===e.key&&(console.log("enter pressed"),w.database().ref("/messages/").set({update:Math.random(),message:a.state.message}),a.refs.messageBox.value="")},a.firebaseMessageListen=function(){console.log("%cLISTENER SET UP","font-size: 16pt"),w.database().ref("/messages").on("value",(function(e){var t=e.val();if(!1===a.state.firstMessage){console.log(t);var n=Object(D.a)(a.state.chatlog);n.unshift(t.message),a.setState({chatlog:n})}a.setState({firstMessage:!1})}))},a.handleChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.firebaseMessageListen()}},{key:"render",value:function(){return o.a.createElement("div",{className:"chatBox"},o.a.createElement("div",{className:"chatMessages"},this.state.chatlog.length>0?this.state.chatlog.map((function(e){return o.a.createElement("p",null,e)})):""),o.a.createElement("input",{ref:"messageBox",type:"text",name:"message",onKeyDown:this.handleKeyDown,onChange:this.handleChange}))}}]),t}(o.a.Component)),j=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={image:[],row:72,col:128,color:"rebeccapurple",mouseDown:!1,firstDraw:!0,eyeDropperActive:!1,webcamShow:!1,saveImageShow:!1},a.activateEyeDropper=function(){a.setState({eyeDropperActive:!0})},a.paintClick=function(e,t,n){a.state.eyeDropperActive?a.setState({color:n.target.style.backgroundColor,eyeDropperActive:!1}):(a.firebaseSetLastDraw(e,t),a.firebaseSetPixel(e,t))},a.paintMouseOver=function(e,t){a.state.mouseDown&&(a.firebaseSetLastDraw(e,t,a.state.color),a.firebaseSetPixel(e,t))},a.setMouseDown=function(e,t){a.firebaseSetLastDraw(e,t,a.state.color),a.firebaseSetPixel(e,t),a.setState({mouseDown:!0})},a.setMouseUp=function(){a.setState({mouseDown:!1})},a.firebaseSetLastDraw=function(e,t){w.database().ref("/lastDraw").set({row:e,col:t,color:a.state.color})},a.firebaseSetPixel=function(e,t){w.database().ref("/grid/".concat(t,"-").concat(e)).set({row:t,col:e,color:a.state.color})},a.firebaseLastDrawListen=function(){w.database().ref("/lastDraw").on("value",(function(e){var t=e.val();!1===a.state.firstDraw&&a.firebasePaint(t.row,t.col,t.color),a.setState({firstDraw:!1})}))},a.firebaseGridWasUpdatedListen=function(){w.database().ref("/gridWasUpdated").on("value",(function(e){e.val();a.getPhotoFromFirebase()}))},a.firebasePaint=function(e,t,n){var o=Object(g.cloneDeep)(a.state.image);o[e].splice(t,1,n),a.setState({image:o})},a.getPhotoFromFirebase=function(){w.database().ref("/grid").once("value").then((function(e){for(var t=Object.values(e.val()),n=Array(72).fill(null).map((function(e){return new Array(128)})),o=0;o<t.length;o++){var r=t[o],s=r.row,c=r.col,l=r.color;n[c][s]=l}a.setState({image:n})}))},a.firebaseEmptyGrid=function(){w.database().ref("/grid").remove()},a.colorPickerData=function(e){a.setState({color:e})},a.saveImageShow=function(){a.setState({saveImageShow:!0})},a.showWebCam=function(){a.setState({webcamShow:!a.state.webcamShow})},a.turnOffWebcam=function(){a.setState({webcamShow:!1})},a.getImageShow=function(){a.setState({saveImageShow:!1})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.firebaseLastDrawListen(),this.firebaseGridWasUpdatedListen(),this.getPhotoFromFirebase()}},{key:"render",value:function(){var e=this,t=this.state.image;return o.a.createElement("div",{className:"App"},this.state.saveImageShow&&o.a.createElement(k,{push:this.props.history.push,image:this.state.image,getImageShow:this.getImageShow}),this.state.image.length>1?o.a.createElement("div",{className:"pixelWrapper"},o.a.createElement("div",{className:"pixelGrid",onMouseLeave:this.setMouseUp},t.map((function(a,n){return o.a.createElement("div",{className:"row",style:{height:"".concat(100/t[n].length,"%")}},a.map((function(a,r){return o.a.createElement("div",{className:"pixel",style:{backgroundColor:t[n][r]||"rgb(70, 70, 70)",width:"".concat(100/t[n].length,"%"),paddingBottom:"".concat(100/t[n].length,"%")},onClick:function(t){return e.paintClick(n,r,t)},onMouseDown:function(){return e.setMouseDown(n,r)},onMouseOver:function(){return e.paintMouseOver(n,r)},onMouseUp:e.setMouseUp})})))})))):o.a.createElement("p",null,"loading..."),o.a.createElement("div",{className:"toolBox"},o.a.createElement(S,null),o.a.createElement("button",{onClick:this.saveImageShow},"save image"),o.a.createElement("button",{onClick:this.activateEyeDropper,className:"eyedropperButton"},"eyedropper"),o.a.createElement(p,{color:this.state.color,sendColorData:this.colorPickerData})),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(O,null))}}]),t}(o.a.Component),x=(a(305),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={images:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.database().ref("/gallery").once("value").then((function(t){var a=Object.values(t.val());e.setState({images:a.reverse()})}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"gallery"},o.a.createElement("h2",null,"Gallery"),o.a.createElement("br",null),o.a.createElement("div",null,this.state.images?this.state.images.map((function(e){return o.a.createElement("div",{className:"artwork"},o.a.createElement("h2",null,"Artist: ",e.artist),o.a.createElement("h2",null,"Title: ",e.title),o.a.createElement("br",null),o.a.createElement("img",{src:e.dataURL,alt:""}))})):o.a.createElement("p",null,"no")))}}]),t}(o.a.Component)),I=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={image:null,firstDraw:!0,mouseDown:!1},a.saveImage=function(){console.log("saves");var e=a.refs.saveCanvas,t=e.getContext("2d");e.width=1280,e.height=720;for(var n=a.state.image,o=0;o<n.length;o++)for(var r=0;r<n[o].length;r++)t.fillStyle=n[o][r],t.fillRect(10*r,10*o,10,10)},a.drawPixel=function(e,t,n){var o=a.refs.saveCanvas.getContext("2d");o.fillStyle=n,o.fillRect(10*t,10*e,10,10)},a.firebaseLastDrawListen=function(){w.database().ref("/lastDraw").on("value",(function(e){var t=e.val();!1===a.state.firstDraw&&a.drawPixel(t.row,t.col,t.color),a.setState({firstDraw:!1})}))},a.firebaseSetPixel=function(e,t){w.database().ref("/grid/".concat(t,"-").concat(e)).set({row:t,col:e,color:"red"})},a.clickOnCanvas=function(e){console.log("click");var t=a.refs.saveCanvas.getBoundingClientRect(),n=Math.floor((e.pageX-t.left)/10),o=Math.floor((e.pageY-t.top)/10);w.database().ref("/lastDraw").set({row:o,col:n,color:"red"}),a.firebaseSetPixel(o,n)},a.mouseDown=function(e){console.log("mouseDown"),a.setState({mouseDown:!0})},a.mouseUp=function(e){console.log("mouseUp"),a.setState({mouseDown:!1})},a.mouseMove=function(e){if(a.state.mouseDown){console.log("mouseMovemouseDownTrue");var t=a.refs.saveCanvas.getBoundingClientRect(),n=Math.floor((e.pageX-t.left)/10),o=Math.floor((e.pageY-t.top)/10);w.database().ref("/lastDraw").set({row:o,col:n,color:"red"}),a.firebaseSetPixel(o,n)}else console.log("mouseMovemouseDownFalse")},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.database().ref("/grid").once("value").then((function(t){for(var a=Object.values(t.val()),n=Array(72).fill(null).map((function(e){return new Array(128)})),o=0;o<a.length;o++){var r=a[o],s=r.row,c=r.col,l=r.color;n[c][s]=l}e.setState({image:n}),e.saveImage()})),this.firebaseLastDrawListen()}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("canvas",{ref:"saveCanvas",width:1280,height:720,className:"saveImageCanvas",onClick:this.clickOnCanvas,onMouseDown:this.mouseDown,onMouseMove:this.mouseMove,onMouseUp:this.mouseUp}))}}]),t}(o.a.Component),M=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(h.a,null,o.a.createElement(h.b,{to:"/gallery"},o.a.createElement("button",{id:"galleryButton"},"gallery")),o.a.createElement(h.b,{to:"/TestCanvas"},o.a.createElement("button",{id:"TestCanvasButton"},"TestCanvas")),o.a.createElement(h.b,{to:"/"},o.a.createElement("button",{id:"pixelGridButton"},"pixelgrid")),o.a.createElement(h.b,{to:"/webcam"},o.a.createElement("button",{id:"webCamButton"},"webcam")),o.a.createElement(f.a,{exact:!0,path:"/",component:j}),o.a.createElement(f.a,{exact:!0,path:"/webcam",component:S}),o.a.createElement(f.a,{exact:!0,path:"/gallery",component:x}),o.a.createElement(f.a,{exact:!0,path:"/TestCanvas",component:I})))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[115,1,2]]]);
//# sourceMappingURL=main.98bf65a5.chunk.js.map